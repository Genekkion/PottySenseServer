<form id="settings-account-password-form" hx-post="htmx/settings/password" hx-target="this" hx-swap="outerHTML">
    {{ .csrfField }}
    <div class="settings-form-field">
        <label for="settings-current-password">Current password:</label>
        <input id="settings-current-password" name="oldPassword" type="text" placeholder="Current password" required>
    </div>
    <div class="settings-form-field">
        <label for="settings-new-password-1">New password:</label>
        <input id="settings-new-password-1" name="newPassword" type="password" placeholder="New password" required>
    </div>
    <div class="settings-form-field">
        <label for="settings-new-password-2">New password:</label>
        <input id="settings-new-password-2" type="password" placeholder="New password" required>
    </div>

    <button id="settings-password-button" type="submit" disabled>Change password</button>
    {{ if eq .status "ok" }}
    <p>Password successfully changed!</p>
    {{ else if eq .status "old"}}
    <p>Invalid current password, please try again.</p>
    {{ else if eq .status "nil" }}
    {{ else }}
    <p>Error setting password, please try again.</p>
    {{ end }}

    <script>
        var password1 = document.getElementById("settings-new-password-1")
        var password2 = document.getElementById("settings-new-password-2")
        var button = document.getElementById("settings-password-button")

        password1.addEventListener('input', () => {
            button.disabled = password1.value !== password2.value
        })
        password2.addEventListener('input', () => {
            button.disabled = password1.value !== password2.value
        })

    </script>

</form>
